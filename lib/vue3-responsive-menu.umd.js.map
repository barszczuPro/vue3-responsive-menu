{"version":3,"file":"vue3-responsive-menu.umd.js","sources":["../node_modules/uid/dist/index.mjs","../library/ResponsiveMenu.vue","../library/ResponsiveMenuInstance.ts"],"sourcesContent":["var IDX=256, HEX=[], SIZE=256, BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nexport function uid(len) {\n\tvar i=0, tmp=(len || 11);\n\tif (!BUFFER || ((IDX + tmp) > SIZE*2)) {\n\t\tfor (BUFFER='',IDX=0; i < SIZE; i++) {\n\t\t\tBUFFER += HEX[Math.random() * 256 | 0];\n\t\t}\n\t}\n\n\treturn BUFFER.substring(IDX, IDX++ + tmp);\n}\n","<template>\n  <nav\n      ref=\"itemsRefs\"\n      :class=\"[{ [`responsive-menu-${config.mode}`]: config.mode }, 'responsive-menu']\"\n  >\n    <ul class=\"responsive-menu__items\">\n      <li\n          :class=\"['responsive-menu__item', { 'responsive-menu__item-submenu': item.childs?.length }]\"\n          :data-rmenu-id=\"item.id\"\n          v-for=\"(item, key) in responsiveMenuMain\"\n          :key=\"key\"\n          ref=\"itemRefs\"\n      >\n        {{ item.label }}\n        <span></span>\n        <ul v-if=\"item.childs\" class=\"responsive-menu__submenu-items\">\n          <li\n              v-for=\"(item, key) in responsiveMenuChilds(item.id)\"\n              class=\"responsive-menu__submenu-item\"\n              :key=\"key\"\n          >\n            {{ item.label }}\n          </li>\n        </ul>\n      </li>\n      <li\n          :class=\"[\n          'responsive-menu__more',\n          { 'responsive-menu__more-disabled': !responsiveMenuMore.length }\n        ]\"\n          ref=\"itemMoreRef\"\n      >\n        {{ config.labelMore }}\n        <span></span>\n        <ul class=\"responsive-menu__submenu-items\">\n          <li\n              v-for=\"(item, key) in responsiveMenuMore\"\n              class=\"responsive-menu__submenu-item\"\n              :key=\"key\"\n          >\n            {{ item.label }}\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script lang=\"ts\" setup>\nimport {computed, nextTick, ref} from 'vue'\nimport type {PropType} from 'vue'\nimport {uid} from 'uid'\nimport type {MenuItem, Config} from './ResponsiveMenuDefine'\n\nconst props = defineProps({\n  items: {\n    type: Array<MenuItem>,\n    default: () => []\n  },\n  config: {\n    type: Object as PropType<Config>,\n    default: () => ({\n      labelMore: 'More',\n      mode: ''\n    })\n  }\n})\n\nconst itemRefs = ref<HTMLElement[]>([])\nconst itemsRefs = ref<HTMLElement | null>(null)\nconst itemMoreRef = ref<HTMLElement | null>(null)\n\nconst responsiveMenu = ref([])\nconst resizeMenuItems = ref([])\nconst responsiveMenuMap = computed(() =>\n  resizeMenuItems.value.map((item) => ({[item.id]: item})).reduce((x, y) => ({...x, ...y}))\n)\n\nconst responsiveMenuMain = computed(() =>\n  resizeMenuItems.value.length\n    ? resizeMenuItems.value.filter((item) => !item.parent && !item.showMore)\n    : responsiveMenu.value\n)\nconst responsiveMenuMore = computed(() =>\n  resizeMenuItems.value.filter((item) => {\n    if (item.wrapSubmenu) {\n      return item.parent && responsiveMenuMap.value[item.parent]?.showMore\n    }\n    return item.showMore\n  })\n)\n\nconst responsiveMenuChilds = (id) => resizeMenuItems.value.filter((item) => item.parent === id)\n\nfunction prepareItems(menu, parentId = null, nextElement = false, wrapSubmenu = false) {\n  const result = []\n  menu.forEach((item, index) => {\n    const id = uid(6)\n    const nextEL =\n      index < menu.length - 1 ? prepareItems([menu[index + 1]], null, true)[0].id : null\n    const transformedItem = {\n      ...item,\n      id,\n      ...(wrapSubmenu && {wrapSubmenu}),\n      ...(nextEL && {nextEL}),\n      ...(parentId && {parent: parentId}),\n      ...(item.submenu && {\n        childs: item.submenu.map((submenuItem) => {\n          const transformedSubmenuItem = prepareItems([submenuItem], id, false, item.wrapSubmenu)[0]\n          result.push(transformedSubmenuItem)\n          return transformedSubmenuItem.id\n        })\n      })\n    }\n    if (transformedItem.childs && item.submenu) {\n      delete transformedItem.submenu\n    }\n    result.push(transformedItem)\n    if (item.submenu && nextElement) {\n      const transformedSubMenu = prepareItems(item.submenu, id)\n      result.push(...transformedSubMenu)\n    }\n  })\n  return result\n}\n\nconst getItemElementByDataRef = (id: number) =>\n  itemRefs.value.find((item) => item.dataset.rmenuId === id)\n\nconst calculateMenu = () => {\n  let submenuIds = responsiveMenu.value\n    .filter((item) => item.childs && item.id && !item.wrap && !item.wrapSubmenu)\n    .map((it) => it.id)\n  let breakpointHide = 0\n\n  function deleteSubmenuArr(id) {\n    const index = submenuIds.indexOf(id)\n    if (index !== -1) {\n      submenuIds.splice(index, 1)\n    }\n    return submenuIds\n  }\n\n  return responsiveMenu.value.map((el) => {\n    if (!el.parent) {\n      const offset = getItemElementByDataRef(el.id)?.offsetWidth\n      const addSubmenus = submenuIds.reduce(\n        (acc, current) => acc + getItemElementByDataRef(current)?.offsetWidth,\n        0\n      )\n      breakpointHide = breakpointHide + offset\n      const breakpointHideAndSubmenus = breakpointHide + addSubmenus\n      if (el.childs) {\n        submenuIds = deleteSubmenuArr(el.id)\n      }\n      return {...el, ...{offset, breakpointHide: breakpointHideAndSubmenus}}\n    } else {\n      return el\n    }\n  })\n}\n\nconst resizeMenu = () => {\n  const itemsOffsetWidth = itemsRefs.value?.offsetWidth\n  resizeMenuItems.value = responsiveMenu.value.map((item) => {\n    let showMore = false\n    if (!item.childs?.length) {\n      showMore = itemsOffsetWidth < item.breakpointHide + itemMoreRef.value?.offsetWidth\n    }\n    if (item.childs?.length && (item.wrap || item.wrapSubmenu)) {\n      showMore = itemsOffsetWidth < item.breakpointHide + itemMoreRef.value?.offsetWidth\n    }\n    return {...item, showMore: !item.parent && showMore}\n  })\n}\n\nconst initMenu = () => {\n  responsiveMenu.value = prepareItems(props.items)\n  nextTick(() => {\n    responsiveMenu.value = calculateMenu()\n    resizeMenu()\n    window.addEventListener('resize', resizeMenu)\n  })\n}\n\ninitMenu()\n</script>\n\n<style lang=\"scss\">\n@import './style.scss';\n</style>\n","import type { App } from 'vue'\nimport ResponsiveMenu from './ResponsiveMenu.vue'\n\nexport default {\n  install(app: App<Element>): void {\n    app.component('ResponsiveMenu', ResponsiveMenu)\n  }\n}\n"],"names":["IDX","HEX","SIZE","BUFFER","uid","len","i","tmp","props","__props","itemRefs","ref","itemsRefs","itemMoreRef","responsiveMenu","resizeMenuItems","responsiveMenuMap","computed","item","x","y","responsiveMenuMain","responsiveMenuMore","_a","responsiveMenuChilds","id","prepareItems","menu","parentId","nextElement","wrapSubmenu","result","index","nextEL","transformedItem","submenuItem","transformedSubmenuItem","transformedSubMenu","getItemElementByDataRef","calculateMenu","submenuIds","it","breakpointHide","deleteSubmenuArr","el","offset","addSubmenus","acc","current","breakpointHideAndSubmenus","resizeMenu","itemsOffsetWidth","showMore","_b","_c","_d","nextTick","app","ResponsiveMenu"],"mappings":"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","x_google_ignoreList":[0]}